<!DOCTYPE html>

<html>

<head>
    <meta name="author" content="David Strauß">
    <meta name="author" content="Mathias Paumgarten">
    <meta name="author" content="Eberhard Gräther">
    
    <title>Marble Run</title>
    
    <link rel="stylesheet" href="stylesheets/screen.css">
</head>

<body>

  <table>
    <tr>
      <td id="sidebar">

        <header>
            <h1>Marble Run</h1>
        </header>

      </td>

      <td id="content">

        <div id="editorControls">

            <a id="runButton" class="editorButton">Run</a>
            <a id="clearButton" class="editorButton">Clear</a>
            <a id="debugButton" class="testButton">Debug Mode</a>

        </div>


        <a id="publishButton" class="testButton">Publish</a>

        <div class="editor" id="editor">
            <canvas id="mainCanvas">
                Your browser does not support canvas.
            </canvas>

            <canvas id="imageCanvas"></canvas>
        </div>

        <script src="javascripts/prototype.js"></script>
        <script src="javascripts/box2d-a/box2d.js"></script>

        <script src="javascripts/marblerun/utilities/utilities.js"></script>
        <script src="javascripts/marblerun/utilities/pattern.js"></script>
        <script src="javascripts/marblerun/utilities/event.js"></script>
        <script src="javascripts/marblerun/utilities/eventengine.js"></script>
        <script src="javascripts/marblerun/utilities/displayobject.js"></script>

        <script src="javascripts/marblerun/bricks/brick.js"></script>
        <script src="javascripts/marblerun/bricks/kicker.js"></script>
        <script src="javascripts/marblerun/bricks/ramp.js"></script>
        <script src="javascripts/marblerun/bricks/curve.js"></script>
        <script src="javascripts/marblerun/bricks/line.js"></script>
        <script src="javascripts/marblerun/bricks/ball.js"></script>
        <script src="javascripts/marblerun/bricks/exit.js"></script>
        <script src="javascripts/marblerun/bricks/spring.js"></script>
        <script src="javascripts/marblerun/bricks/boost.js"></script>
        <script src="javascripts/marblerun/bricks/breaker.js"></script>

        <script src="javascripts/marblerun/grid.js"></script>
        <script src="javascripts/marblerun/toolbox.js"></script>
        <script src="javascripts/marblerun/field.js"></script>
        <script src="javascripts/marblerun/editor.js"></script>

        <script>

          var editor;

          window.onload = function() {

            document.onselectstart = function() {return false};

            var editorCanvas = document.getElementById("mainCanvas");
            var imageCanvas = document.getElementById("imageCanvas");
        
            var editorPosition = $('editor').cumulativeOffset($('editor'));

            editor = new Editor(editorCanvas, imageCanvas);
            editor.x = editorPosition.left;
            editor.y = editorPosition.top;
            
            Pattern.context = editorCanvas.getContext("2d");
            Pattern.onload = function() {
              
              editor.startRender(); 

            }

            Pattern.loadPattern([
              {name: "brick", path: "images/pattern-brick.png"}
            ]);

          }

        </script>
      </td>
    </tr>
  </table>
</body>

</html>
